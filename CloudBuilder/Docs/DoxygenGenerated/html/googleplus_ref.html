<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.8"/>
<title>CloudBuilder: Google+ Settings</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="CloudBuilder_logo_128x128.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">CloudBuilder
   &#160;<span id="projectnumber">3.0.0</span>
   </div>
   <div id="projectbrief">Making social games is easy !</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.8 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Modules</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Google+ Settings </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h2>Table of Content</h2>
<ol type="1">
<li><a href="#gp_toc1">Google+ Developer</a></li>
<li><a href="#gp_toc2">Google+ on iOS</a></li>
<li><a href="#gp_toc3">Google+ on Android</a></li>
</ol>
<h1><a class="anchor" id="gp_toc1"></a>
Setup a Google+ App</h1>
<p>To be able to log in <a class="el" href="namespace_cloud_builder.html">CloudBuilder</a> with the user's Google+ account, you need to create a <a href="https://console.developers.google.com">Google+ App</a></p>
<p>Here, you need to create a new project from the Developers Console. Just push the "Create" button, then choose a name for your project, and you're good to go. </p><div class="image">
<img src="GoogleDevelopersConsole.png" alt="GoogleDevelopersConsole.png"/>
<div class="caption">
Create a new Project in Developers Console</div></div>
<p>Once the project is created, it will appear in the list of your managed projects and you can click on it. This will display the overview of the project, giving you the Project Number you will have to reference in your different applications. </p><div class="image">
<img src="GooglePlusProject.png" alt="GooglePlusProject.png"/>
<div class="caption">
Your Google+ Project Number</div></div>
<p>From the overview, you now need to activate the Google+ API. From the left menu of the overview, press "APIs &amp; auth" and in the sub section "APIs", make sure to activate the "Google+ API". Your application is now authorized to use Google+ single sign on. </p><div class="image">
<img src="GooglePlusAPI.png" alt="GooglePlusAPI.png"/>
<div class="caption">
Activating Google+ API for your Project</div></div>
<p>When done, you now just need to create new Client IDs for iOS and Android, using the OAuth section. You can access it from the "APIs &amp; auth" left menu, "Credentials" sub section. </p><div class="image">
<img src="OAuthClientIDs.png" alt="OAuthClientIDs.png"/>
<div class="caption">
Creating OAuth Client IDs</div></div>
<h1><a class="anchor" id="gp_toc2"></a>
Google+ on iOS</h1>
<p>To finish creating an iOS Client ID, in the popping window, choose "Installed application" as APPLICATION TYPE and below INSTALLED APPLICATION TYPE, choose iOS option. Then fill the BUNDLE ID field with the same bundle id used in your iOS application, in the plist file (Bundle identifier entry). </p><div class="image">
<img src="iOSClientIDCreate.png" alt="iOSClientIDCreate.png"/>
<div class="caption">
Creating iOS Client ID</div></div>
<p>When this is done, look at the Client ID generated for you, and keep it, you will need it now to edit your Xcode project (see below) </p><div class="image">
<img src="iOSClientID.png" alt="iOSClientID.png"/>
<div class="caption">
Getting iOS Client ID</div></div>
<p>Then in Xcode, go to the "Info" section of your project and first create a "GooglePlusAppID" key entry. In the value field, you will copy/paste the Client ID from the previous screen, as generated by Google. Then, you need to create a new "URL Type" entry, just filling "Identifier" and "URL Schemes" fields with your Bundle Identifier. Leave the other fields empty. </p><div class="image">
<img src="XcodeProject.png" alt="XcodeProject.png"/>
<div class="caption">
Modifying Xcode project</div></div>
<p>It's almost finished. Just check that you have all the necessary frameworks linked to your project by checking the "Build Phases" tab of your project. </p><div class="image">
<img src="XcodeFrameworks.png" alt="XcodeFrameworks.png"/>
<div class="caption">
Checking mandatory frameworks</div></div>
<p>Lastly, just ensure that you have the following code in the AppDelegate of your project: </p><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;- (BOOL)application:(UIApplication *)application</div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;            openURL:(NSURL *)url</div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;  sourceApplication:(NSString *)sourceApplication</div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;         annotation:(id)annotation {</div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;    // attempt to extract a token from the url</div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;    if (CClan::Instance() &amp;&amp; url)</div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;    {</div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;</div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;        CHJSON j;</div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;        j.Put(&quot;url&quot;, [[url absoluteString ] UTF8String]);</div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;        j.Put(&quot;source&quot;, [sourceApplication UTF8String]);</div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;        CClan::Instance()-&gt;HandleURL(j, new CloudBuilder::CResultHandler(myClan, &amp;MyClan::HandleURLDone));</div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;    }</div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;</div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;    return false;</div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;}</div>
</div><!-- fragment --><h1><a class="anchor" id="gp_toc3"></a>
Google+ on Android</h1>
<p>You need to get your SHA1 signing certificate fingerprint in order to create a new Android Google+ application. To do so, you have different options. First option is to type into a terminal the following command: </p><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;keytool -exportcert -alias androiddebugkey -keystore {path-to-debug-or-production-keystore} -list -v</div>
</div><!-- fragment --><p> When debugging you can use '~/.android/debug.keystore' as the path. Then copy the string displayed after the line beginning with 'SHA1: '. Alternatively, you can use Eclipse to get this SHA1 string. In the menu ADT/Preferences, go to the Android/Build panel and copy the string directly from here. </p><div class="image">
<img src="EclipseSHA1.png" alt="EclipseSHA1.png"/>
<div class="caption">
Getting SHA1 signing certificate</div></div>
<p>To finish creating an Android Client ID, in the popping window, choose "Installed application" as APPLICATION TYPE and below INSTALLED APPLICATION TYPE, choose Android option. Then fill the PACKAGE NAME field with the one used to build your APK, and the SIGNING CERTIFICATE with the string retrieved from the previous step. </p><div class="image">
<img src="AndroidClientIDCreate.png" alt="AndroidClientIDCreate.png"/>
<div class="caption">
Creating Android Client ID</div></div>
<p> Then you need to import the Android project {Repository/CloudBuilder/Android/google-play-services-lib} in your Eclipse workspace. When this is done, edit the "Properties/Android" panel of your application inside Eclipse, and add a new Library referencing the GooglePlay Services Library. </p><div class="image">
<img src="EclipseProjects.png" alt="EclipseProjects.png"/>
<div class="caption">
Referencing GooglePlay Services Library</div></div>
<p>To finish the setup of Google+ in your Android application, you need to add some code and modify the ApplicationManifest.xml Add the following code in the onCreate method of your Activity: </p><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;protected void onCreate(Bundle savedInstanceState) {</div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;    super.onCreate(savedInstanceState);</div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;</div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;</div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;    // All your instanciation code is here.</div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;</div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;    //  This code to enable Google+ login in Clan of the Cloud</div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;    GooglePlusHandler.InitGooglePlayServices(this, null);</div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;</div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;}</div>
</div><!-- fragment --><p>Add the following code in the onActivityResult method of your Activity: </p><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;public void onActivityResult(int requestCode, int resultCode, Intent data) {</div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;    super.onActivityResult(requestCode, resultCode, data);</div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;</div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;    // All your previous code is here.</div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;</div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;    //  This code to enable Google+ login in Clan of the Cloud</div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;    GooglePlusHandler.onResultGooglePlusActivity(requestCode, resultCode);</div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;}</div>
</div><!-- fragment --><p>Add the following entry in the AndroidManifest.xml inside the &lt;application&gt; tag: </p><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;&lt;meta-data android:name=&quot;com.google.android.gms.version&quot; android:value=&quot;@integer/google_play_services_version&quot;/&gt;</div>
</div><!-- fragment --> </div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Mon Dec 28 2015 13:02:13 for CloudBuilder by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.8
</small></address>
</body>
</html>
